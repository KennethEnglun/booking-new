# LPMS 場地預約系統

這是一個基於 React + Express + SQLite 的現代化場地預約系統，支援 AI 智慧建議功能。

## 🚀 新功能 (v2.0)

### 1. 管理員增強功能
- **批量刪除**：管理員可以選擇多個預約進行批量刪除
- **一鍵清空**：管理員可以一鍵刪除所有預約
- **全選功能**：快速選擇所有預約

### 2. 表格式預覽
- **表格視圖**：選擇日期後以表格形式查看當天所有場地的預約情況
- **時間軸顯示**：從早上 7:30 到晚上 8:00 的完整時間軸
- **場地橫軸**：橫向顯示所有場地，縱向顯示時間段

### 3. 預約天數擴展
- **最多 20 天**：單次預約最多可以選擇 20 個日期（原來是 7 天）
- **批量預約**：支援同一時段在多個日期進行預約

### 4. AI 智慧檢測升級
- **多日期檢測**：AI 助理現在會檢查所有選定日期的時段衝突
- **即時反饋**：選擇多個日期時立即顯示所有衝突情況
- **智慧建議**：基於所有衝突提供最佳的替代時段建議

### 5. 用途分類系統
- **預設選項**：會議、課後活動、家長教育、4RS、課後托管、加強輔導、IEP
- **自定義選項**：選擇「其他」後可以自行填寫用途
- **單選設計**：確保用途分類的一致性

## 🛠️ 技術特點

- **前端**：React 18 + Vite + Tailwind CSS
- **後端**：Express.js + SQLite
- **AI 整合**：DeepSeek API 智慧建議
- **響應式設計**：支援桌面和移動設備
- **即時更新**：實時衝突檢測和建議

## 📋 系統功能

### 基本功能
- 🏢 多場地預約管理
- 📅 多日期批量預約
- ⏰ 靈活的時間選擇
- 👥 負責人管理
- 🎯 用途分類

### 管理功能
- 👨‍💼 管理員模式（密碼：512524）
- 📊 預約總覽
- 🗑️ 單個/批量/全部刪除
- 📋 表格式預覽

### AI 功能
- 🤖 即時衝突檢測
- 💡 智慧時段建議
- 🔍 多日期分析
- 🎯 最佳化建議

## 🚀 部署說明

### 本地開發
```bash
# 安裝依賴
npm install

# 啟動開發伺服器
npm start

# 訪問 http://localhost:3001
```

### Railway 部署
```bash
# 推送到 Railway
railway deploy

# 或使用 GitHub 自動部署
git push origin main
```

## 📱 使用指南

### 建立預約
1. 填寫負責人姓名
2. 選擇預約場地
3. 選擇用途（8 個預設選項 + 自定義）
4. 添加預約日期（最多 20 天）
5. 設定時間範圍
6. AI 助理會即時檢查所有日期的衝突
7. 根據建議調整時間或確認預約

### 查看預約
- **列表視圖**：按日期分組顯示所有預約
- **表格視圖**：選擇日期查看當天的時間表格
- **篩選功能**：按場地或日期篩選

### 管理員功能
1. 輸入管理員密碼（512524）
2. 在列表視圖中：
   - 勾選要刪除的預約
   - 使用「全選」快速選擇所有預約
   - 點擊「刪除選中」進行批量刪除
   - 點擊「刪除所有預約」清空所有數據

## 🔧 配置說明

### 環境變數
```env
DEEPSEEK_API_KEY=sk-your-api-key-here
PORT=3001
```

### 場地配置
系統預設場地：101, 102, 103, 104, 201, 202, 203, 204, 301, 302, 303, 304, STEM Room, 音樂室, 視藝室, 圖書館

### 用途選項
- 會議
- 課後活動
- 家長教育
- 4RS
- 課後托管
- 加強輔導
- IEP
- 其他（自定義）

## 📊 API 端點

### 預約管理
- `GET /api/bookings` - 獲取所有預約
- `POST /api/bookings` - 創建預約
- `DELETE /api/bookings/:id` - 刪除預約

### 衝突檢測
- `POST /api/check-conflicts` - 檢查衝突（支援多日期）

### 系統配置
- `GET /api/config` - 獲取系統配置
- `GET /api/user` - 獲取用戶資訊

## 🎯 更新日誌

### v2.0 (2025-01-01)
- ✅ 新增管理員批量刪除功能
- ✅ 新增表格式預覽功能
- ✅ 預約天數限制擴展至 20 天
- ✅ AI 多日期檢測功能
- ✅ 用途分類系統
- ✅ 全選和批量操作
- ✅ 響應式表格設計

### v1.0 (2024-12-30)
- ✅ 基本預約功能
- ✅ AI 衝突檢測
- ✅ 管理員功能
- ✅ Railway 部署支援

## 🤝 技術支援

如有問題或建議，請聯繫系統管理員。

---

**LPMS 場地預約系統** - 讓預約更智慧、更便捷！ 